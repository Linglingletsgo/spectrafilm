<<<<<<< HEAD
# spectrafilm
**SpectraFilm** æ˜¯ä¸€ä¸ªåŸºäºŽç‰©ç†åŽŸç†çš„èƒ¶ç‰‡æ¨¡æ‹Ÿå¼•æ“Žï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œä»…æ”¯æŒ RAW æ ¼å¼ã€‚é€šè¿‡ç²¾ç¡®æ¨¡æ‹Ÿèƒ¶ç‰‡çš„å…‰åŒ–å­¦ååº”è¿‡ç¨‹ï¼Œå®žçŽ°é«˜ä¿çœŸçš„èƒ¶ç‰‡æ•ˆæžœã€‚
=======
# SpectraFilm: ç‰©ç†çº§èƒ¶ç‰‡æ¨¡æ‹Ÿå¼•æ“Ž

**SpectraFilm** æ˜¯ä¸€ä¸ªåŸºäºŽç‰©ç†åŽŸç†çš„èƒ¶ç‰‡æ¨¡æ‹Ÿå¼•æ“Žï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œä»…æ”¯æŒ RAW æ ¼å¼ã€‚é€šè¿‡ç²¾ç¡®æ¨¡æ‹Ÿèƒ¶ç‰‡çš„å…‰åŒ–å­¦ååº”è¿‡ç¨‹ï¼Œå®žçŽ°é«˜ä¿çœŸçš„èƒ¶ç‰‡æ•ˆæžœã€‚

## é¡»çŸ¥
ä½œè€…åªæµ‹è¯•äº†ç´¢å°¼çš„.arwæ ¼å¼ï¼Œå…¶ä»–æ ¼å¼æœªæµ‹è¯•ï¼Œç†è®ºä¸Šåº”è¯¥ç›¸åŒã€‚
é¡¹ç›®ä»…ä¸ºdemoï¼Œæœªç»è¿‡å……åˆ†æµ‹è¯•ï¼Œæ¬¢è¿Žæäº¤issueã€‚
å„ä¸ªé€‰é¡¹å¯ä»¥å¤šåŠ å°è¯•ï¼Œä¸èƒ½ä¿è¯æ•ˆæžœã€‚
è®¡ç®—æ—¶é—´è¾ƒé•¿ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
æ— é•œå¤´ç•¸å˜æ ¡æ­£ä¿¡æ¯ï¼Œæ‰€ä»¥ç”Ÿæˆå›¾ç‰‡ä¼šå­˜åœ¨ç•¸å˜ã€‚
ä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œç¦æ­¢å•†ç”¨ã€‚

## è”ç³»æ–¹å¼
@Dominic Duan
GitHub: https://github.com/Linglingletsgo/
Website: www.dominicduan.com
Email: lingonthebeat@gmail.com
å°çº¢ä¹¦ (XiaoHongShu): @Linglingletsgo


## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ðŸŽ¯ ç‰©ç†ä»¿çœŸå¼•æ“Ž
åŸºäºŽçœŸå®žèƒ¶ç‰‡ç‰©ç†å­¦çš„ 4 é˜¶æ®µå…‰å­¦ç®¡çº¿ï¼š

1. **æ›å…‰ (Exposure)** - å…‰è°±å“åº”æ¨¡æ‹Ÿ
   - 3Ã—3 å…‰è°±çµæ•åº¦çŸ©é˜µï¼ˆåŸºäºŽ D65 å…‰æºå’Œ Mallett2019 åŸºå‡½æ•°ï¼‰
   - çœŸå®žçš„ H&D ç‰¹æ€§æ›²çº¿æ¨¡æ‹Ÿéžçº¿æ€§å…‰åŒ–å­¦ååº”
   - æ”¯æŒæ›å…‰è¡¥å¿ï¼ˆEVï¼‰è°ƒæ•´

2. **æ˜¾å½± (Development)** - åŒ–å­¦åŠ¨åŠ›å­¦
   - åˆ†å±‚è®¡ç®— RGB æ„Ÿå…‰å±‚çš„ H&D æ›²çº¿
   - æ½œå½±è½¬åŒ–ä¸º CMY æŸ“æ–™å¯†åº¦

3. **æ‰«æ (Scanning)** - Status M å¯†åº¦è®¡
   - æ¨¡æ‹Ÿå·¥ä¸šæ ‡å‡†å¯†åº¦è®¡ï¼ˆ640nm/540nm/440nmï¼‰
   - å…¨å…‰è°±ç§¯åˆ†è®¡ç®— CMY æŸ“æ–™å¸æ”¶
   - æ­£ç¡®å†çŽ°æ©™è‰²è‰²ç½©ç‰©ç†ç‰¹æ€§

4. **åç›¸ (Inversion)** - æ­£ç‰‡æ¸²æŸ“
   - ç‰‡åŸºé”å®šåç›¸ç®—æ³•
   - è‡ªåŠ¨ä¸­å’Œè‰²ç½©ï¼Œç”Ÿæˆæ­£ç‰‡å¯†åº¦

### ðŸ“¸ RAW å›¾åƒæ”¯æŒ
- **WASM è§£ç å™¨**: é›†æˆ `libraw-mini`ï¼ˆLibRaw çš„ WebAssembly ç§»æ¤ç‰ˆï¼‰
- **æ”¯æŒæ ¼å¼**: ARW (Sony), CR2 (Canon), NEF (Nikon), DNG, RAF, ORF ç­‰
- **åŽ‹ç¼©æ”¯æŒ**: å¤„ç†å„åŽ‚å•†çš„ä¸“æœ‰åŽ‹ç¼©æ ¼å¼ï¼ˆå¦‚ Sony Compressed RAWï¼‰
- **çº¿æ€§å·¥ä½œæµ**: 
  - RAW â†’ sRGB (LibRaw è§£ç ) â†’ Linear (é€† Gamma) â†’ èƒ¶ç‰‡æ¨¡æ‹Ÿ â†’ sRGB (æ˜¾ç¤º)
  - ä¿æŒæœ€é«˜ç²¾åº¦çš„è‰²å½©å’Œç»†èŠ‚

### ðŸŽ¨ å†…ç½®èƒ¶ç‰‡æ¡£æ¡ˆ
åŒ…å« 16+ ç§ä¸“ä¸šèƒ¶ç‰‡é¢„è®¾ï¼Œæ•°æ®æ¥è‡ª[agx-emulsion](https://github.com/sobotka/agx-emulsion)ï¼š
- Kodak Portra 400/800
- Kodak Vision3 500T
- Fujifilm Pro 400H
- ç­‰ç­‰...

---

## ðŸ”„ å®Œæ•´å¤„ç†æµç¨‹

```
ç”¨æˆ·ä¸Šä¼ å›¾åƒ
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å›¾åƒåŠ è½½ä¸Žè§£ç  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RAW æ–‡ä»¶ï¼Ÿ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ YES         â”‚ NO (JPG/PNG)              â”‚
â”‚             â”‚                           â”‚
â”‚ LibRaw WASM â”‚ createImageBitmap/Image   â”‚
â”‚ â†“           â”‚ â†“                         â”‚
â”‚ sRGB 8-bit  â”‚ sRGB 8-bit                â”‚
â”‚ RGBA        â”‚ RGBA                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€† Gamma 2.2   â”‚  (è½¬æ¢ä¸ºçº¿æ€§å…‰ç©ºé—´)
â”‚ sRGB â†’ Linear  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ èƒ¶ç‰‡æ¨¡æ‹Ÿå¼•æ“Ž (SimulationEngine)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Exposure:  çº¿æ€§ RGB â†’ å…‰è°±å“åº”     â”‚
â”‚              (3Ã—3 çŸ©é˜µ + EV)           â”‚
â”‚ 2. Develop:   å¯¹æ•°æ›å…‰ â†’ CMY å¯†åº¦     â”‚
â”‚              (H&D æ›²çº¿æ’å€¼)            â”‚
â”‚ 3. Scan:      CMY å¸æ”¶ â†’ RGB é€å…‰çŽ‡   â”‚
â”‚              (Status M å¯†åº¦è®¡)         â”‚
â”‚ 4. Invert:    è´Ÿç‰‡ â†’ æ­£ç‰‡å¯†åº¦         â”‚
â”‚              (ç‰‡åŸºé”å®šåç›¸)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gamma æ ¡æ­£     â”‚  (è½¬æ¢ä¸ºæ˜¾ç¤ºç©ºé—´)
â”‚ Linear â†’ sRGB  â”‚  Density â†’ Brightness
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
Canvas æ˜¾ç¤º (è‡ªé€‚åº”å°ºå¯¸)
```

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```
è®¿é—® `http://localhost:3000`

### æž„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

---

## ðŸ“ é¡¹ç›®æž¶æž„

```
src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ page.tsx              # ä¸»ç•Œé¢ï¼ˆå›¾åƒä¸Šä¼ ã€RAW è§£ç ã€æ˜¾ç¤ºï¼‰
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ simulation/
â”‚   â”‚   â”œâ”€â”€ engine.ts         # æ ¸å¿ƒç‰©ç†å¼•æ“Ž
â”‚   â”‚   â”œâ”€â”€ spectral.ts       # å…‰è°±è®¡ç®—
â”‚   â”‚   â””â”€â”€ colorimetry.ts    # è‰²åº¦å­¦æ•°æ®
â”‚   â””â”€â”€ types.ts              # ç±»åž‹å®šä¹‰
public/
â””â”€â”€ profiles/                 # èƒ¶ç‰‡é¢„è®¾ JSON
    â”œâ”€â”€ kodak_portra_400.json
    â”œâ”€â”€ kodak_vision3_500t.json
    â””â”€â”€ ...
```

### å…³é”®æŠ€æœ¯æ ˆ
- **å‰ç«¯æ¡†æž¶**: Next.js 16 + React 19 + TypeScript
- **RAW è§£ç **: libraw-mini (WebAssembly)
- **æž„å»ºå·¥å…·**: Webpack (æ”¯æŒ WASM)
- **éƒ¨ç½²**: çº¯é™æ€ç«™ç‚¹ï¼Œå¯éƒ¨ç½²åˆ° Vercel/Netlify/GitHub Pages

---

## ðŸ› ï¸ å¼€å‘è€…é€‰é¡¹

### å¯¼å…¥æ–°èƒ¶ç‰‡æ•°æ®
å¦‚éœ€ä»ŽåŽŸå§‹ `agx-emulsion` åº“å¯¼å…¥æ–°çš„èƒ¶ç‰‡æ•°æ®ï¼š

1. **è®¾ç½® Python çŽ¯å¢ƒ**:
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   pip install colour-science numpy scipy
   ```

2. **è¿è¡Œå¯¼å…¥è„šæœ¬**:
   ```bash
   .venv/bin/python scripts/import_agx.py data/agx-emulsion/agx_emulsion/data/film
   ```

---


## ðŸ“– å‚è€ƒèµ„æ–™
- [LibRaw](https://www.libraw.org/) - RAW å›¾åƒè§£ç åº“
- [agx-emulsion](https://github.com/sobotka/agx-emulsion) - èƒ¶ç‰‡ç‰©ç†æ•°æ®æº
- [Colour Science](https://www.colour-science.org/) - è‰²åº¦å­¦è®¡ç®—åº“

---

## ðŸ“„ è®¸å¯è¯
MIT License

## ðŸ™ è‡´è°¢
æ„Ÿè°¢ `agx-emulsion` é¡¹ç›®æä¾›çš„é«˜è´¨é‡èƒ¶ç‰‡ç‰©ç†æ•°æ®ã€‚
>>>>>>> ce3f2f8 (Initial commit: High-precision RAW film simulation engine)
